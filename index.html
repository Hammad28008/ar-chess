<!DOCTYPE html>
<html>
<head>
    <script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
    <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/donmccurdy/aframe-extras@v6.1.1/dist/aframe-extras.min.js"></script>
</head>
<body style="margin: 0; overflow: hidden;">
    <a-scene embedded arjs="sourceType: webcam; debugUIEnabled: false;">
        
        <!-- Marker-based AR Target (uses Hiro marker) -->
        <a-marker type="pattern" url="https://raw.githubusercontent.com/nicolocarpignoli/arjs-marker-testing/master/markers/pattern-files/patt.hiro">
            
            <!-- Menu Panel -->
            <a-plane 
                position="0 1.5 0" 
                width="2" 
                height="1.2" 
                color="#222233"
                opacity="0.9"
                shader="flat">
                
                <!-- Menu Title -->
                <a-text 
                    value="AR MENU" 
                    position="0 0.4 0.01" 
                    align="center" 
                    color="white" 
                    width="3"
                    scale="1.5 1.5 1">
                </a-text>
                
                <!-- Menu Option 1 -->
                <a-box 
                    id="option1"
                    position="-0.6 0 0.01" 
                    width="0.6" 
                    height="0.3" 
                    depth="0.05"
                    color="#4CC3D9"
                    animation__mouseenter="property: scale; to: 1.1 1.1 1.1; dur: 200; startEvents: mouseenter"
                    animation__mouseleave="property: scale; to: 1 1 1; dur: 200; startEvents: mouseleave">
                    
                    <a-text 
                        value="Info" 
                        position="0 0 0.026" 
                        align="center" 
                        color="white"
                        width="1.5">
                    </a-text>
                </a-box>
                
                <!-- Menu Option 2 -->
                <a-box 
                    id="option2"
                    position="0 0 0.01" 
                    width="0.6" 
                    height="0.3" 
                    depth="0.05"
                    color="#7BC8A4"
                    animation__mouseenter="property: scale; to: 1.1 1.1 1.1; dur: 200; startEvents: mouseenter"
                    animation__mouseleave="property: scale; to: 1 1 1; dur: 200; startEvents: mouseleave">
                    
                    <a-text 
                        value="Video" 
                        position="0 0 0.026" 
                        align="center" 
                        color="white"
                        width="1.5">
                    </a-text>
                </a-box>
                
                <!-- Menu Option 3 -->
                <a-box 
                    id="option3"
                    position="0.6 0 0.01" 
                    width="0.6" 
                    height="0.3" 
                    depth="0.05"
                    color="#FFC65D"
                    animation__mouseenter="property: scale; to: 1.1 1.1 1.1; dur: 200; startEvents: mouseenter"
                    animation__mouseleave="property: scale; to: 1 1 1; dur: 200; startEvents: mouseleave">
                    
                    <a-text 
                        value="3D Model" 
                        position="0 0 0.026" 
                        align="center" 
                        color="white"
                        width="1.5">
                    </a-text>
                </a-box>
                
                <!-- Menu Option 4 -->
                <a-box 
                    id="option4"
                    position="0 -0.4 0.01" 
                    width="1.8" 
                    height="0.3" 
                    depth="0.05"
                    color="#F16745"
                    animation__mouseenter="property: scale; to: 1.1 1.1 1.1; dur: 200; startEvents: mouseenter"
                    animation__mouseleave="property: scale; to: 1 1 1; dur: 200; startEvents: mouseleave">
                    
                    <a-text 
                        value="Settings" 
                        position="0 0 0.026" 
                        align="center" 
                        color="white"
                        width="1.5">
                    </a-text>
                </a-box>
                
            </a-plane>
            
            <!-- Content Display Area -->
            <a-plane 
                id="contentDisplay"
                position="0 -1.5 0" 
                width="2" 
                height="1" 
                color="#333344"
                opacity="0"
                visible="false">
                
                <a-text 
                    id="contentText"
                    value="" 
                    position="0 0 0.01" 
                    align="center" 
                    wrap-count="30"
                    color="white"
                    width="2">
                </a-text>
                
            </a-plane>
            
            <!-- Video Player (hidden by default) -->
            <a-video 
                id="videoPlayer"
                position="0 -1.5 0"
                width="2" 
                height="1"
                visible="false"
                src="https://upload.wikimedia.org/wikipedia/commons/transcoded/c/c0/Big_Buck_Bunny_4K.webm/Big_Buck_Bunny_4K.webm.480p.vp9.webm">
            </a-video>
            
            <!-- 3D Model (hidden by default) -->
            <a-entity
                id="model3d"
                position="0 -1.5 0"
                scale="0.5 0.5 0.5"
                visible="false"
                gltf-model="https://cdn.aframe.io/test-models/models/glTF-2.0/virtualcity/VC.gltf">
            </a-entity>
            
        </a-marker>
        
        <!-- Camera -->
        <a-entity camera></a-entity>
        
    </a-scene>
    
    <script>
        // Add click event listeners to menu items
        document.querySelectorAll('a-box').forEach(box => {
            box.addEventListener('click', function() {
                const contentDisplay = document.getElementById('contentDisplay');
                const contentText = document.getElementById('contentText');
                const videoPlayer = document.getElementById('videoPlayer');
                const model3d = document.getElementById('model3d');
                
                // Hide all content first
                contentDisplay.setAttribute('visible', 'false');
                contentDisplay.setAttribute('opacity', '0');
                videoPlayer.setAttribute('visible', 'false');
                videoPlayer.components.material.data.src = '';
                model3d.setAttribute('visible', 'false');
                
                // Show content based on clicked option
                switch(this.id) {
                    case 'option1':
                        contentText.setAttribute('value', 'Welcome to the AR Menu!\n\nThis is an interactive augmented reality menu.\nPoint your camera at a Hiro marker to see it in action.\n\nFeatures:\n• 3D Interactive Buttons\n• Video Playback\n• 3D Models\n• Real-time Interaction');
                        contentDisplay.setAttribute('visible', 'true');
                        contentDisplay.setAttribute('opacity', '0.9');
                        break;
                        
                    case 'option2':
                        videoPlayer.setAttribute('visible', 'true');
                        videoPlayer.components.material.data.src = 'https://upload.wikimedia.org/wikipedia/commons/transcoded/c/c0/Big_Buck_Bunny_4K.webm/Big_Buck_Bunny_4K.webm.480p.vp9.webm';
                        break;
                        
                    case 'option3':
                        model3d.setAttribute('visible', 'true');
                        break;
                        
                    case 'option4':
                        contentText.setAttribute('value', 'Settings:\n\n• Volume: 80%\n• Quality: Medium\n• Controls: Touch\n• Language: English\n\nTap any button to return to menu.');
                        contentDisplay.setAttribute('visible', 'true');
                        contentDisplay.setAttribute('opacity', '0.9');
                        break;
                }
                
                // Add visual feedback
                this.setAttribute('color', '#FFFFFF');
                setTimeout(() => {
                    switch(this.id) {
                        case 'option1': this.setAttribute('color', '#4CC3D9'); break;
                        case 'option2': this.setAttribute('color', '#7BC8A4'); break;
                        case 'option3': this.setAttribute('color', '#FFC65D'); break;
                        case 'option4': this.setAttribute('color', '#F16745'); break;
                    }
                }, 300);
            });
        });
    </script>
    
    <style>
        body {
            font-family: Arial, sans-serif;
            background: #000;
            color: white;
        }
        
        /* Instructions overlay */
        #instructions {
            position: fixed;
            top: 20px;
            left: 20px;
            background: rgba(0,0,0,0.7);
            padding: 15px;
            border-radius: 10px;
            z-index: 10000;
            max-width: 300px;
        }
        
        #instructions h3 {
            margin-top: 0;
            color: #4CC3D9;
        }
        
        #marker {
            width: 100px;
            height: 100px;
            margin: 10px auto;
            display: block;
            border: 2px solid white;
        }
    </style>
    
    <div id="instructions">
        <h3>AR Menu Instructions:</h3>
        <p>1. Print or display this Hiro marker on another device:</p>
        <img id="marker" src="https://raw.githubusercontent.com/nicolocarpignoli/arjs-marker-testing/master/markers/pattern-files/patt.hiro" alt="Hiro Marker">
        <p>2. Allow camera access when prompted</p>
        <p>3. Point your camera at the marker</p>
        <p>4. Tap the 3D buttons to interact</p>
        <p><small>Works best on mobile devices with Chrome/Firefox</small></p>
    </div>
</body>
</html>
